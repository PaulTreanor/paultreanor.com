<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="My personal website where I keep my notes and thoughts."/><meta name="og:title" content="Paul Treanor"/><meta name="twitter:card" content="summary_large_image"/><link rel="alternate" type="application/rss+xml" title="RSS Feed for paultreanor.com" href="/rss.xml"/><title>Fixing VSCode &quot;go to definition&quot; in webpack projects</title><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/f1fcd53e97c06bb4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f1fcd53e97c06bb4.css" data-n-g=""/><link rel="preload" href="/_next/static/css/d0f3a9e7dfd4b19b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d0f3a9e7dfd4b19b.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-481ef0d25a716735.js" defer=""></script><script src="/_next/static/chunks/pages/_app-1693ab7fc31cdd21.js" defer=""></script><script src="/_next/static/chunks/562-d0bcd15ec5190dc9.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bid%5D-331c202ad6dd6bd9.js" defer=""></script><script src="/_next/static/IYbQO9bWi9E23dBMniqiq/_buildManifest.js" defer=""></script><script src="/_next/static/IYbQO9bWi9E23dBMniqiq/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script><script nomodule="" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script><div class="mx-2 md:mx-20 lg:mx-40 font-open-sans mb-32"><header class="max-w-2xl mx-auto"><div class="mt-10 mb-8"><a href="/"><div class="text-4xl">üè†</div></a></div></header><main><div class="max-w-2xl mx-auto"><h5 class="text-slate-600 font-normal mb-5"><time dateTime="2024-04-04">April 4, 2024</time></h5><div class="blog-content"><h1>Fixing VSCode "go to definition" in webpack projects</h1>
<p>If you press Command and left-click an import statement in VSCode, it opens the file of the defined import in a new tab. This is a handy feature when traversing components and dependencies across a big React project, but for some reason, it didn't work with the codebase I maintain at Rapid7.</p>
<p>The issue was caused by VSCode not being able to resolve the path provided in the <code class="inline-code-custom-style">import</code> statement, because my import paths were actually wrong. For example, in a file called <code class="inline-code-custom-style">scanConfigTableActions.js</code>, an object is imported like this:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> historyUtils <span class="hljs-keyword">from</span> <span class="hljs-string">'utils/historyUtils'</span>;
</code></pre>
<p>The code runs fine, but <code class="inline-code-custom-style">historyUtils.js</code> is in a completely different part of the project's file tree, so <code class="inline-code-custom-style">utils/historyUtils</code> is not the correct relative import between the two files.</p>
<pre><code class="hljs language-txt">src/
‚îî‚îÄ‚îÄ js/
    ‚îú‚îÄ‚îÄ components/
    ‚îÇ   ‚îî‚îÄ‚îÄ app/
    ‚îÇ       ‚îî‚îÄ‚îÄ scanConfigs/
    ‚îÇ           ‚îî‚îÄ‚îÄ scanConfigTableActions.js
    ‚îî‚îÄ‚îÄ utils/
        ‚îî‚îÄ‚îÄ historyUtils.js
</code></pre>
<h2>webpack and jsconfig.json</h2>
<p>The reason this non-relative import path resolves OK is because the project's <code class="inline-code-custom-style">webpackconfig.js</code> defines <code class="inline-code-custom-style">src/js</code> as a path to resolve module from, meaning that import statements don't need to specify this part of the path. This means that <code class="inline-code-custom-style">utils/historyUtils.js</code> is the same as writing <code class="inline-code-custom-style">src/js/utils/historyUtils.js</code>.</p>
<p>This is what was included in the project's <code class="inline-code-custom-style">webpack.config.js</code>:</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
<span class="hljs-attr">"resolve"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"modules"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>path.resolve(__dirname<span class="hljs-punctuation">,</span> <span class="hljs-string">"src/js"</span>)<span class="hljs-punctuation">,</span> <span class="hljs-string">"node_modules"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>VSCode's tooling isn't aware of these paths though. You have to let VSCode know about this by adding the module resolution paths to a jsconfig.json or tsconfig.json file at the root of your project.</p>
<p>In my case, I added <code class="inline-code-custom-style">src/js</code> as a path:</p>
<pre><code class="hljs language-json"><span class="hljs-comment">// jsconfig.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"."</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// This must be specified if "paths" is.</span>
    <span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"utils/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/js/*"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/**/*"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"fix-vscode-path-imports","contentHtml":"\u003ch1\u003eFixing VSCode \"go to definition\" in webpack projects\u003c/h1\u003e\n\u003cp\u003eIf you press Command and left-click an import statement in VSCode, it opens the file of the defined import in a new tab. This is a handy feature when traversing components and dependencies across a big React project, but for some reason, it didn't work with the codebase I maintain at Rapid7.\u003c/p\u003e\n\u003cp\u003eThe issue was caused by VSCode not being able to resolve the path provided in the \u003ccode class=\"inline-code-custom-style\"\u003eimport\u003c/code\u003e statement, because my import paths were actually wrong. For example, in a file called \u003ccode class=\"inline-code-custom-style\"\u003escanConfigTableActions.js\u003c/code\u003e, an object is imported like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e historyUtils \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'utils/historyUtils'\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe code runs fine, but \u003ccode class=\"inline-code-custom-style\"\u003ehistoryUtils.js\u003c/code\u003e is in a completely different part of the project's file tree, so \u003ccode class=\"inline-code-custom-style\"\u003eutils/historyUtils\u003c/code\u003e is not the correct relative import between the two files.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-txt\"\u003esrc/\n‚îî‚îÄ‚îÄ js/\n    ‚îú‚îÄ‚îÄ components/\n    ‚îÇ   ‚îî‚îÄ‚îÄ app/\n    ‚îÇ       ‚îî‚îÄ‚îÄ scanConfigs/\n    ‚îÇ           ‚îî‚îÄ‚îÄ scanConfigTableActions.js\n    ‚îî‚îÄ‚îÄ utils/\n        ‚îî‚îÄ‚îÄ historyUtils.js\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003ewebpack and jsconfig.json\u003c/h2\u003e\n\u003cp\u003eThe reason this non-relative import path resolves OK is because the project's \u003ccode class=\"inline-code-custom-style\"\u003ewebpackconfig.js\u003c/code\u003e defines \u003ccode class=\"inline-code-custom-style\"\u003esrc/js\u003c/code\u003e as a path to resolve module from, meaning that import statements don't need to specify this part of the path. This means that \u003ccode class=\"inline-code-custom-style\"\u003eutils/historyUtils.js\u003c/code\u003e is the same as writing \u003ccode class=\"inline-code-custom-style\"\u003esrc/js/utils/historyUtils.js\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThis is what was included in the project's \u003ccode class=\"inline-code-custom-style\"\u003ewebpack.config.js\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003e\"resolve\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"modules\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003epath.resolve(__dirname\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"src/js\"\u003c/span\u003e)\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"node_modules\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eVSCode's tooling isn't aware of these paths though. You have to let VSCode know about this by adding the module resolution paths to a jsconfig.json or tsconfig.json file at the root of your project.\u003c/p\u003e\n\u003cp\u003eIn my case, I added \u003ccode class=\"inline-code-custom-style\"\u003esrc/js\u003c/code\u003e as a path:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-comment\"\u003e// jsconfig.json\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"compilerOptions\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"baseUrl\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\".\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// This must be specified if \"paths\" is.\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"paths\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"utils/*\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"src/js/*\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"include\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"src/**/*\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e","title":"Fixing VSCode \"go to definition\" in webpack projects","short":"Troubleshooting VSCode's 'go to definition' feature in webpack-based projects","date":"2024-04-04","slug":"fix-vscode-path-imports","createdAt":"2024-04-04","img":"blog-2.jpg","tags":["Tutorial"]}},"__N_SSG":true},"page":"/[id]","query":{"id":"fix-vscode-path-imports"},"buildId":"IYbQO9bWi9E23dBMniqiq","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>