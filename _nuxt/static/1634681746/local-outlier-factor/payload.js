__NUXT_JSONP__("/local-outlier-factor", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax){return {data:[{article:{slug:"local-outlier-factor",title:ab,short:"Explaination and implementation of the local outlier factor algorithm.",date:"3 June 2021",createdAt:"2021-06-03T00:00:00.000Z",img:"blog-2.jpg",tags:["OpenHands","Python","Code"],toc:[{id:ac,depth:A,text:ad},{id:ae,depth:A,text:af},{id:ag,depth:A,text:ah},{id:ai,depth:A,text:aj},{id:ak,depth:A,text:al}],body:{type:"root",children:[{type:b,tag:"h1",props:{id:"local-outlier-factor-from-scratch-in-python"},children:[{type:b,tag:m,props:{href:"#local-outlier-factor-from-scratch-in-python",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:ab}]},{type:a,value:f},{type:b,tag:B,props:{id:ac},children:[{type:b,tag:m,props:{href:"#overview",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:ad}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Local outlier factor (LOF) is an anomaly detection algorithm which can give you an idea of how similar an item is to other items in a dataset."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The algorithm essentialy compares the density of an item's neighbourhood (how close the items in an area are to eachother) to the density of the item's neighbour's neighbourhoods."}]},{type:a,value:f},{type:b,tag:B,props:{id:ae},children:[{type:b,tag:m,props:{href:"#why-use-local-outlier-factor",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:af}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"LOF is great for datasets with several clusters because it only compares an item to other items in it's locality."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This means that an item that is a large distance from it's nearest neighbours may not be classified as an outlier so long as it's neighbours are also large distances from their nearest neighbours."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This image shows how an outlier in one area of a dataset may not be an outlier in another area of the dataset:"}]},{type:a,value:f},{type:b,tag:E,props:{src:"https:\u002F\u002Fupload.wikimedia.org\u002Fwikipedia\u002Fcommons\u002Fthumb\u002F5\u002F59\u002FLOF.svg\u002F1024px-LOF.svg.png",width:450,alt:"Local outlier factor diagram"},children:[]},{type:a,value:f},{type:b,tag:"figcaption",props:{center:"",className:["figure-caption","text-center"]},children:[{type:a,value:"Source: Wikipedia"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:t,props:{},children:[]},{type:a,value:f},{type:b,tag:t,props:{},children:[]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:B,props:{id:ag},children:[{type:b,tag:m,props:{href:"#implenting-the-algorithm-in-python",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:ah}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This is how LOF is implemented in the "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002FPaulTreanor\u002Fopenhands",rel:[H,I,J],target:K},children:[{type:a,value:"OpenHands project"}]},{type:a,value:u}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The algorithm is split into 3 methods corrosponding to the 3 maths functions from the "},{type:b,tag:m,props:{href:am,rel:[H,I,J],target:K},children:[{type:a,value:"algorithm's Wikipedia page"}]},{type:a,value:u}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The LOF method takes 4 arguments:"}]},{type:a,value:f},{type:b,tag:"ul",props:{className:[an]},children:[{type:a,value:w},{type:b,tag:x,props:{},children:[{type:a,value:"A (the item to be classified, as a list of features)"}]},{type:a,value:w},{type:b,tag:x,props:{},children:[{type:a,value:"a list of A's nearest neighbours"}]},{type:a,value:w},{type:b,tag:x,props:{},children:[{type:a,value:"an instance of the KNN classifier"}]},{type:a,value:w},{type:b,tag:x,props:{},children:[{type:a,value:"a value for K"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:L,props:{id:"1-reachability-distance"},children:[{type:b,tag:m,props:{href:"#1-reachability-distance",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:"1. Reachability distance"}]},{type:a,value:f},{type:b,tag:E,props:{src:"\u002Frdist.png",alt:"reachability distance"},children:[]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:t,props:{},children:[]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The reachability distance between items A and B is the distance between B and it's Kth nearest neighbour or the distance between A and B (whichever is larger)."}]},{type:a,value:f},{type:b,tag:M,props:{className:[N]},children:[{type:b,tag:O,props:{className:[P,Q]},children:[{type:b,tag:R,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:S}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"reachability_distance"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:C}]},{type:a,value:"\n    B_n_neighbours "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    k_dist "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:aq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:" n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:X}]},{type:a,value:" n "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:Y}]},{type:a,value:as},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    AB_dist "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:" distance"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    r_distance "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"k_dist"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:" AB_dist"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:_},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:$}]},{type:a,value:" r_distance\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:t,props:{},children:[]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:L,props:{id:"2-local-reachability-density"},children:[{type:b,tag:m,props:{href:"#2-local-reachability-density",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:"2. Local reachability density"}]},{type:a,value:f},{type:b,tag:E,props:{src:"\u002Flrd.png",alt:"local reachability density"},children:[]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:t,props:{},children:[]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Local reachability density is the inverse of the average reachability distance between A and each of it's K nearest neighbours."}]},{type:a,value:f},{type:b,tag:M,props:{className:[N]},children:[{type:b,tag:O,props:{className:[P,Q]},children:[{type:b,tag:R,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:S}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"local_r_density"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:C}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,"comment"]},children:[{type:a,value:"# Local reachability density"}]},{type:a,value:"\n    r_distance_list "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]},{type:a,value:_},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:X}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:Y}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:C}]},{type:a,value:"\n        B_r_distance "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:" rDistance"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n        r_distance_list"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"B_r_distance"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    avg_r_distance "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:av}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"r_distance_list"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aa}]},{type:a,value:"k\n    local_r_density "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,"number"]},children:[{type:a,value:"1.0"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aa}]},{type:a,value:"avg_r_distance\n    "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:$}]},{type:a,value:" local_r_density\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:t,props:{},children:[]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:L,props:{id:"3-local-outlier-factor"},children:[{type:b,tag:m,props:{href:"#3-local-outlier-factor",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:"3. Local outlier factor"}]},{type:a,value:f},{type:b,tag:E,props:{src:"\u002Flof.png",alt:"local outlier factor"},children:[]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:t,props:{},children:[]},{type:a,value:"\nThe local outlier factor of object A can then be defined as the average local reachability-density of each of Aâ€™s neighbours divided by the local reachability-density of A."}]},{type:a,value:f},{type:b,tag:M,props:{className:[N]},children:[{type:b,tag:O,props:{className:[P,Q]},children:[{type:b,tag:R,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:S}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"local_outlier_factor"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:C}]},{type:a,value:"\n    A_local_r_density "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:aw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    local_r_density_list "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]},{type:a,value:_},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:X}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:Y}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:C}]},{type:a,value:"\n        B_n_neighbours "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n        B_local_r_density "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:aw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:as},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n        local_r_density_list"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"B_local_r_density"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    local_r_density_total "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:av}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"local_r_density_list"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    divisor "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:" A_local_r_density"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"*"}]},{type:a,value:"k\n    local_outlier_factor "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:" local_r_density_total"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aa}]},{type:a,value:"divisor\n    local_outlier_factor "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:l}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"-"}]},{type:a,value:"local_outlier_factor\n    "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:$}]},{type:a,value:" local_outlier_factor\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:t,props:{},children:[]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:B,props:{id:ai},children:[{type:b,tag:m,props:{href:"#performance",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:aj}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"LOF is slow because since it essentially runs KNN "},{type:b,tag:ax,props:{},children:[{type:a,value:"k"},{type:b,tag:"sup",props:{},children:[{type:a,value:"2"}]},{type:a,value:"+1"}]},{type:a,value:" times. If performance is important it may be worth looking at the "},{type:b,tag:m,props:{href:"https:\u002F\u002Fdoi.org\u002F10.1145\u002F342009.335388",rel:[H,I,J],target:K},children:[{type:a,value:"local "},{type:b,tag:ax,props:{},children:[{type:a,value:aq}]},{type:a,value:" outlier factor"}]},{type:a,value:" algorithm instead."}]},{type:a,value:f},{type:b,tag:B,props:{id:ak},children:[{type:b,tag:m,props:{href:"#resources",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:al}]},{type:a,value:f},{type:b,tag:"ol",props:{className:[an]},children:[{type:a,value:w},{type:b,tag:x,props:{},children:[{type:b,tag:m,props:{href:am},children:[{type:a,value:"Local outlier factor's excellent Wikipedia page."}]}]},{type:a,value:w},{type:b,tag:x,props:{},children:[{type:b,tag:m,props:{href:"https:\u002F\u002Fbenwtrent.github.io\u002F2019\u002F04\u002F26\u002Foutlier-detection-from-scratch\u002F"},children:[{type:a,value:"Benjamin Trent's very elegant implementation of LOF."}]}]},{type:a,value:w},{type:b,tag:x,props:{},children:[{type:b,tag:m,props:{href:"https:\u002F\u002Fdoi.org\u002F10.1145%2F335191.335388"},children:[{type:a,value:"The OG local outlier factor paper by Breunig and Kriegel."}]}]},{type:a,value:f}]}]},dir:"\u002Fblog",path:"\u002Fblog\u002Flocal-outlier-factor",extension:".md",updatedAt:"2021-10-19T22:14:42.217Z"}}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation","\n",",","operator","p","(",")","=","a","keyword"," ","true",-1,"icon","icon-link","br","."," classifier","\n  ","li","A"," k",3,"h3",":"," nearest_neighbours","img","B","builtin","nofollow","noopener","noreferrer","_blank","h5","div","nuxt-content-highlight","pre","language-python","line-numbers","code","def","  ","function"," B","[","for","in","]","\n    ","return","\u002F","Local outlier factor from scratch in Python","overview","Overview","why-use-local-outlier-factor","Why use local outlier factor?","implenting-the-algorithm-in-python","Implenting the algorithm in Python","performance","Performance","resources","Resources","https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FLocal_outlier_factor","pl-5","get_knn","max","distance","euclidean"," B_n_neighbours"," B ","append","sum"," local_r_density","em")));