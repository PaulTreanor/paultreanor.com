{"pageProps":{"postData":{"id":"gatsby","contentHtml":"<h1>Advice on building production applications in Gatsby in 2023</h1>\n<p>I've been building education focused web application for the past few weeks, and I went with Gatsby for the frontend. My main reason for choosing Gatsby was because I'm familiar with it and that let me move very fast, but it got me thinking about whether or not Gatsby's a good choice for other projects.</p>\n<p><strong>Why use Gatsby</strong></p>\n<ul>\n<li>If you need very fast static pages</li>\n<li>If you want to easily deploy to static hosts</li>\n<li>If you want a framework that's closer to barebones React</li>\n</ul>\n<p><strong>Why avoid Gatsby</strong></p>\n<ul>\n<li>If you have a slow dev machine (build times are painful)</li>\n<li>If you're building a very large app/site with dozens of pages</li>\n<li>If you are working with a team (I think slower feedback loops will compound)</li>\n</ul>\n<p>Again, maybe the biggest factor that should affect your choice is just using what you are familiar with. I don't think choosing the latest tools for every single project isn't necessary or wise.</p>\n<p>If you do decide to go with Gatsby then here's my advice:</p>\n<h2>1. Limit complexity</h2>\n<p><strong>YAGNI</strong>. Save yourself the mental bandwidth and cut out as much Gatsby boilerplate as you possibly can, it will speed up your build times, the speed that you can work at, and it will save you from endless bugs.</p>\n<p>You <a href=\"https://www.gatsbyjs.com/docs/how-to/querying-data/using-gatsby-without-graphql/\">don't need the GraphQL</a> to fetch your data and you don't need <a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-sitemap/\">sitemap</a>, <a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-google-gtag/\">gtag</a>, and <a href=\"https://www.gatsbyjs.com/plugins/gatsby-image/\">gatbsy-image</a> plugins. I ended up tearing these plugins out and just using <code>&#x3C;img></code> tags for images (with no negative effect on page speed). Gatsby's weakness is its overly big API surface area, try to avoid to bad stuff and just use the good stuff (router and static page generation).</p>\n<h2>2. Use bun</h2>\n<p>Gatsby's developer feedback loops are a little painful but Bun helps tremendously with this (as well as having an M1 MacBook to be honest). <code>bun install</code> literally runs twice as fast for my frontend as <code>npm install</code>, and <code>bun run dev</code> is 2 full seconds faster than <code>npm run dev</code>. It helps a lot.</p>\n<h2>3. Use TypeScript</h2>\n<p>TypeScript feels like a no-brainer for apps. TypeScript 100% let me build this app faster and it made me spend a little bit longer thinking about how my data is laid which is very valuable.</p>\n<p>I just setup a <code>tsconfig.json</code> file and added type checking to my <code>dev</code> command. I've never seen this approach for setting up TypeScript in the wild before but it's very easy to setup and avoids more plugins and dependencies.</p>\n<p>My tsconfig.json:</p>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n\t<span class=\"hljs-attr\">\"compilerOptions\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n\t\t<span class=\"hljs-attr\">\"skipLibCheck\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">true</span></span><span class=\"hljs-punctuation\">,</span>\n\t\t<span class=\"hljs-attr\">\"allowImportingTsExtensions\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">true</span></span><span class=\"hljs-punctuation\">,</span>\n\t\t<span class=\"hljs-attr\">\"target\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"esnext\"</span><span class=\"hljs-punctuation\">,</span>\n\t\t<span class=\"hljs-attr\">\"lib\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-string\">\"dom\"</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-string\">\"esnext\"</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n\t\t<span class=\"hljs-attr\">\"jsx\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"preserve\"</span><span class=\"hljs-punctuation\">,</span>\n\t\t<span class=\"hljs-attr\">\"module\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"esnext\"</span><span class=\"hljs-punctuation\">,</span>\n\t\t<span class=\"hljs-attr\">\"moduleResolution\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"node\"</span><span class=\"hljs-punctuation\">,</span>\n\t\t<span class=\"hljs-attr\">\"esModuleInterop\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">true</span></span><span class=\"hljs-punctuation\">,</span>\n\t\t<span class=\"hljs-attr\">\"forceConsistentCasingInFileNames\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">true</span></span><span class=\"hljs-punctuation\">,</span>\n\t\t<span class=\"hljs-attr\">\"noImplicitAny\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">true</span></span><span class=\"hljs-punctuation\">,</span>\n\t\t<span class=\"hljs-attr\">\"noEmit\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">true</span></span>\n\t<span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n\t<span class=\"hljs-attr\">\"include\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-string\">\"./src/**/*\"</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-string\">\"./gatsby-node.ts\"</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-string\">\"./gatsby-config.ts\"</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-string\">\"./plugins/**/*\"</span><span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<p>My <code>package.json</code> scripts:</p>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-attr\">\"scripts\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n\t<span class=\"hljs-attr\">\"dev\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"tsc --noEmit &#x26;&#x26; gatsby clean &#x26;&#x26; gatsby develop\"</span><span class=\"hljs-punctuation\">,</span>\n\t<span class=\"hljs-attr\">\"start\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"gatsby develop\"</span><span class=\"hljs-punctuation\">,</span>\n\t<span class=\"hljs-attr\">\"build\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"gatsby build\"</span><span class=\"hljs-punctuation\">,</span>\n\t<span class=\"hljs-attr\">\"serve\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"gatsby serve\"</span><span class=\"hljs-punctuation\">,</span>\n\t<span class=\"hljs-attr\">\"clean\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"gatsby clean\"</span><span class=\"hljs-punctuation\">,</span>\n\t<span class=\"hljs-attr\">\"typecheck\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"tsc --noEmit\"</span><span class=\"hljs-punctuation\">,</span>\n\t<span class=\"hljs-attr\">\"lint\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"bunx eslint . --ext .ts,.tsx\"</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<h2>4.. Keep state management light</h2>\n<p>One of the reasons static side rendering is getting more popular is because it simplifies state management. Since Gatsby is a client side React framework we have to be thoughtful with state.</p>\n<p>Redux is very powerful but I would avoid it if possible. In my experience Redux leads to chaotic hard-to-follow code and it splits up components into multiple files. I was able to use useState with prop drilling, React-Query, and browser storage (using AWS Amplify's Auth) instead of Redux and I'm really glad I did so. These choices massively simplified my app's code.</p>\n<h2>5. Use TailwindCSS and good tooling</h2>\n<p>TailwindCSS is great. It keeps your components in one file and lets you work way faster. I recommend setting up inline-fold and a custom keyboard shortcut to toggle collapsing the className attribute to improve readability (I use <code>cmd+M</code>). I might write a post about this in the future because I can't use Tailwind without this setup now.</p>","title":"Advice on building production applications in Gatsby in 2023","short":"Some lessons learned in using Gatsby in late 2023","date":"2023-11-23","slug":"gatsby","createdAt":"2023-11-23","img":"blog-2.jpg","tags":["Code","Work"]}},"__N_SSG":true}