{"pageProps":{"postData":{"id":"fix-vscode-path-imports","contentHtml":"<h1>Fixing VSCode \"go to definition\" in webpack projects (and why import path aliases are bad)</h1>\n<h3>Cause of the issue</h3>\n<p>This issue stems from path aliases instead of absolute paths for module imports. Path aliases can seem a little bit neater than having paths like <code class=\"inline-code-custom-style\">.../../../components/app/scanConfigs/scanConfigTableActions.js</code> throughout your codebase but they add a needless and compounding amount of complexity to your project. As you layer tooling like a bunder, TypeScript, or monorepo tooling you need to add configuration for your path aliases for each of these or your IDE won't work as expected.</p>\n<p>Path aliases are a pointless abstraction, but if you're stuck with them, here's how to fix them in webpack.</p>\n<h3>Fixing the issue with webpack</h3>\n<p>If you press Command and left-click an import statement in VSCode, it opens the file of the defined import in a new tab. This is a handy feature when traversing components and dependencies across a big React project, but for some reason, it didn't work with the codebase I maintain at Rapid7.</p>\n<p>The issue was caused by VSCode not being able to resolve the path provided in the <code class=\"inline-code-custom-style\">import</code> statement, because my import paths were actually wrong. For example, in a file called <code class=\"inline-code-custom-style\">scanConfigTableActions.js</code>, an object is imported like this:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> * <span class=\"hljs-keyword\">as</span> historyUtils <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'utils/historyUtils'</span>;\n</code></pre>\n<p>The code runs fine, but <code class=\"inline-code-custom-style\">historyUtils.js</code> is in a completely different part of the project's file tree, so <code class=\"inline-code-custom-style\">utils/historyUtils</code> is not the correct relative import between the two files.</p>\n<pre><code class=\"hljs language-txt\">src/\n└── js/\n    ├── components/\n    │   └── app/\n    │       └── scanConfigs/\n    │           └── scanConfigTableActions.js\n    └── utils/\n        └── historyUtils.js\n</code></pre>\n<h2>webpack and jsconfig.json</h2>\n<p>The reason this non-relative import path resolves OK is because the project's <code class=\"inline-code-custom-style\">webpackconfig.js</code> defines <code class=\"inline-code-custom-style\">src/js</code> as a path to resolve module from, meaning that import statements don't need to specify this part of the path. This means that <code class=\"inline-code-custom-style\">utils/historyUtils.js</code> is the same as writing <code class=\"inline-code-custom-style\">src/js/utils/historyUtils.js</code>.</p>\n<p>This is what was included in the project's <code class=\"inline-code-custom-style\">webpack.config.js</code>:</p>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n<span class=\"hljs-attr\">\"resolve\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">\"modules\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>path.resolve(__dirname<span class=\"hljs-punctuation\">,</span> <span class=\"hljs-string\">\"src/js\"</span>)<span class=\"hljs-punctuation\">,</span> <span class=\"hljs-string\">\"node_modules\"</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<p>VSCode's tooling isn't aware of these paths though. You have to let VSCode know about this by adding the module resolution paths to a jsconfig.json or tsconfig.json file at the root of your project.</p>\n<p>In my case, I added <code class=\"inline-code-custom-style\">src/js</code> as a path:</p>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-comment\">// jsconfig.json</span>\n<span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">\"compilerOptions\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">\"baseUrl\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\".\"</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-comment\">// This must be specified if \"paths\" is.</span>\n    <span class=\"hljs-attr\">\"paths\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">\"utils/*\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-string\">\"src/js/*\"</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"include\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-string\">\"src/**/*\"</span><span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>","title":"Fixing VSCode \"go to definition\" in webpack projects","short":"Troubleshooting VSCode's 'go to definition' feature in webpack-based projects","date":"2024-04-04","slug":"fix-vscode-path-imports","createdAt":"2024-04-04","img":"blog-2.jpg","tags":["Tutorial"]}},"__N_SSG":true}