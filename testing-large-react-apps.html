<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="My personal website where I keep my notes and thoughts."/><meta name="og:title" content="Paul Treanor"/><meta name="twitter:card" content="summary_large_image"/><link rel="alternate" type="application/rss+xml" title="RSS Feed for paultreanor.com" href="/rss.xml"/><title>Testing large React applications</title><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/a0a5c827be6f67e6.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/a0a5c827be6f67e6.css" crossorigin="" data-n-g=""/><link rel="preload" href="/_next/static/css/d0f3a9e7dfd4b19b.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/d0f3a9e7dfd4b19b.css" crossorigin="" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-fd8027ecb5121007.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-0c7baedefba6b077.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-c52fd4c6b732ab84.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-59b1c5d7bb30336f.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/640-888c0c029cd5a029.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/%5Bid%5D-8387bc9bd40ac31b.js" defer="" crossorigin=""></script><script src="/_next/static/PkGLazdwikLSpzAS6Oea5/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/PkGLazdwikLSpzAS6Oea5/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script><script nomodule="" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script><div class="mx-2 md:mx-20 lg:mx-40 font-open-sans mb-32"><header class="max-w-2xl mx-auto"><div class="mt-10 mb-8"><a href="/"><div class="text-4xl">üè†</div></a></div></header><main><div class="max-w-2xl mx-auto"><h5 class="text-slate-600 font-normal mb-5"><time dateTime="2024-06-16">June 16, 2024</time></h5><div class="blog-content"><h1>Testing large React applications</h1>
<p>I've been writing a lot of tests for large applications at Rapid7 and I think the strategies for writing tests with React Testing Library and Jest carry over nicely to small projects.</p>
<h2>Group tests by source files</h2>
<p>For large applications it's good to write tests in files that correspond with the source files they are testing. So <code class="inline-code-custom-style">login.ts</code> should be tested by <code class="inline-code-custom-style">login.test.ts</code>, and <code class="inline-code-custom-style">logout.ts</code> should be tested by <code class="inline-code-custom-style">logout.test.ts</code>. They shouldn't be tested in a single <code class="inline-code-custom-style">auth.test.ts</code> file. The layout of your <code class="inline-code-custom-style">/tests</code> directory should mirror the <code class="inline-code-custom-style">/src</code> directory - <a href="https://symflower.com/en/company/blog/2022/best-practices-for-test-files/">this pattern is very common in Java projects.</a></p>
<p>As the number of tests grows, this lets us keep the relationships between our application and its tests manageable. The downside of this is that we are organising tests based on implementation rather than the behaviour we actually want to test.</p>
<p>A project directory structure where tests mirror src:</p>
<pre><code class="hljs language-txt">/react-app
|-- /node_modules                      
|-- /src                     
|   |-- /components          
|   |   |-- /Header
|   |   |   |-- Header.tsx   
|   |   |-- /Footer
|   |   |   |-- Footer.tsx   
|   |-- /utils               
|   |   |-- validate.ts      
|   |-- App.tsx              
|   |-- index.tsx            
|-- /tests           
|   |-- /components          
|   |   |-- /Header
|   |   |   |-- Header.test.tsx  
|   |   |-- /Footer
|   |   |   |-- Footer.test.tsx  
|   |-- /utils               
|   |   |-- validate.test.ts 
|   |-- App.test.tsx                
|-- package.json                         
|-- README.md                
</code></pre>
<h2>Group related tests with nested describes</h2>
<p>Jest allows you to group tests together with the <a href="https://jestjs.io/docs/api#describename-fn"><code class="inline-code-custom-style">describe</code></a> keyword. Within the describe scope, tests can share the same setup functions, mocks, and cleanup functions. The use of <code class="inline-code-custom-style">describe</code> blocks makes tests easier to read, document, skip, and understand.</p>
<p>Describes are especially useful for grouping tests that examine the same component under different states. By giving each state its own describe, we can keep tests that share mock data together, and apart from tests that require different mock data. This avoids issues where test environments aren't cleaning up as expected after tests, I run into this issue a lot when tests rely on mocks that aren't organised in <code class="inline-code-custom-style">describe</code> blocks.</p>
<p>It's hard to make an example of this using simple code because this type of test structure really only comes into it's own when you're using something like a complex Redux store to handle state.</p>
<p>Here's a not-real code example that gets across the main idea:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-string">'@testing-library/jest-dom'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Provider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;
<span class="hljs-keyword">import</span> { render, screen, fireEvent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@testing-library/react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Dashboard</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../../components/Dashboard"</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'Dashboard'</span>, <span class="hljs-function">() =></span> {
    <span class="hljs-title function_">describe</span>(<span class="hljs-string">'Admin permissions'</span>, <span class="hljs-function">() =></span> {
        <span class="hljs-keyword">let</span> handleDelete = jest.<span class="hljs-title function_">fn</span>();

        <span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =></span> {
            store = <span class="hljs-title function_">mockStore</span>({
                <span class="hljs-attr">userProfile</span>: {
                    <span class="hljs-attr">name</span>: <span class="hljs-string">'John Doe'</span>,
                    <span class="hljs-attr">email</span>: <span class="hljs-string">'john.doe@example.com'</span>,
                    <span class="hljs-attr">permissions</span>: <span class="hljs-string">"admin"</span>
                }
            });

            <span class="hljs-title function_">render</span>(
                <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>></span>
                    <span class="hljs-tag">&#x3C;<span class="hljs-name">Dashboard</span> /></span>
                <span class="hljs-tag">&#x3C;/<span class="hljs-name">Provider</span>></span></span>
            );
        });

        <span class="hljs-title function_">test</span>(<span class="hljs-string">'renders correct user email'</span>, <span class="hljs-function">() =></span> {
            <span class="hljs-keyword">const</span> userEmail = screen.<span class="hljs-title function_">getByTestId</span>(<span class="hljs-string">'user-email'</span>);
            <span class="hljs-title function_">expect</span>(userEmail).<span class="hljs-title function_">toBeInTheDocument</span>();
            <span class="hljs-title function_">expect</span>(userEmail).<span class="hljs-title function_">toHaveTextContent</span>(<span class="hljs-string">'john.doe@example.com'</span>);
        });

        <span class="hljs-title function_">test</span>(<span class="hljs-string">'allows user to delete important thing'</span>, <span class="hljs-function">() =></span> {
            <span class="hljs-keyword">const</span> handleDelete = jest.<span class="hljs-title function_">fn</span>();
            <span class="hljs-keyword">const</span> deleteButton = screen.<span class="hljs-title function_">getByTestId</span>(<span class="hljs-string">'delete-button'</span>);
            <span class="hljs-title function_">expect</span>(deleteButton).<span class="hljs-title function_">toBeInTheDocument</span>();
            fireEvent.<span class="hljs-title function_">click</span>(deleteButton);
            <span class="hljs-title function_">expect</span>(handleDelete).<span class="hljs-title function_">toHaveBeenCalled</span>();
        });
    });

    <span class="hljs-title function_">describe</span>(<span class="hljs-string">'Guest permissions'</span>, <span class="hljs-function">() =></span> {
        <span class="hljs-keyword">let</span> handleDelete = jest.<span class="hljs-title function_">fn</span>();

        <span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =></span> {
            store = <span class="hljs-title function_">mockStore</span>({
                <span class="hljs-attr">userProfile</span>: {
                    <span class="hljs-attr">name</span>: <span class="hljs-string">'Average Joe'</span>,
                    <span class="hljs-attr">email</span>: <span class="hljs-string">'average.joe@example.com'</span>,
                    <span class="hljs-attr">permissions</span>: <span class="hljs-string">"guest"</span>
                }
            });

            <span class="hljs-title function_">render</span>(
                <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>></span>
                    <span class="hljs-tag">&#x3C;<span class="hljs-name">Dashboard</span> /></span>
                <span class="hljs-tag">&#x3C;/<span class="hljs-name">Provider</span>></span></span>
            );
        });

        <span class="hljs-title function_">test</span>(<span class="hljs-string">'renders correct user email'</span>, <span class="hljs-function">() =></span> {
            <span class="hljs-keyword">const</span> userEmail = screen.<span class="hljs-title function_">getByTestId</span>(<span class="hljs-string">'user-email'</span>);
            <span class="hljs-title function_">expect</span>(userEmail).<span class="hljs-title function_">toBeInTheDocument</span>();
            <span class="hljs-title function_">expect</span>(userEmail).<span class="hljs-title function_">toHaveTextContent</span>(<span class="hljs-string">'average.joe@example.com'</span>);
        });

        <span class="hljs-title function_">test</span>(<span class="hljs-string">'does not allow user to delete important thing'</span>, <span class="hljs-function">() =></span> {
            <span class="hljs-keyword">const</span> handleDelete = screen.<span class="hljs-title function_">getByTestId</span>(<span class="hljs-string">'delete-button'</span>);
            <span class="hljs-title function_">expect</span>(deleteButton).<span class="hljs-title function_">toBeInTheDocument</span>();
            fireEvent.<span class="hljs-title function_">click</span>(deleteButton);
            <span class="hljs-title function_">expect</span>(handleDelete).<span class="hljs-property">not</span>.<span class="hljs-title function_">toHaveBeenCalled</span>();
        });
    });
});

</code></pre>
<p><a href="https://kentcdodds.com/blog/avoid-nesting-when-youre-testing">Ken C Dodds suggests avoiding describes when writing tests</a>, so take my recommendations with a pinch of salt. His use-case is slightly different though, as he suggests grouping tests by behaviour being tested, rather than the source files being tested. I recommend grouping tests by their source file, and then grouping by behaviour using describes within each test file.</p>
<p>You'd think these details wouldn't matter for small codebases, but we naturally have a lot less time and attention to give them, so organising the tests in a straightfoward way is very useful.</p></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"postData":{"id":"testing-large-react-apps","contentHtml":"\u003ch1\u003eTesting large React applications\u003c/h1\u003e\n\u003cp\u003eI've been writing a lot of tests for large applications at Rapid7 and I think the strategies for writing tests with React Testing Library and Jest carry over nicely to small projects.\u003c/p\u003e\n\u003ch2\u003eGroup tests by source files\u003c/h2\u003e\n\u003cp\u003eFor large applications it's good to write tests in files that correspond with the source files they are testing. So \u003ccode class=\"inline-code-custom-style\"\u003elogin.ts\u003c/code\u003e should be tested by \u003ccode class=\"inline-code-custom-style\"\u003elogin.test.ts\u003c/code\u003e, and \u003ccode class=\"inline-code-custom-style\"\u003elogout.ts\u003c/code\u003e should be tested by \u003ccode class=\"inline-code-custom-style\"\u003elogout.test.ts\u003c/code\u003e. They shouldn't be tested in a single \u003ccode class=\"inline-code-custom-style\"\u003eauth.test.ts\u003c/code\u003e file. The layout of your \u003ccode class=\"inline-code-custom-style\"\u003e/tests\u003c/code\u003e directory should mirror the \u003ccode class=\"inline-code-custom-style\"\u003e/src\u003c/code\u003e directory - \u003ca href=\"https://symflower.com/en/company/blog/2022/best-practices-for-test-files/\"\u003ethis pattern is very common in Java projects.\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eAs the number of tests grows, this lets us keep the relationships between our application and its tests manageable. The downside of this is that we are organising tests based on implementation rather than the behaviour we actually want to test.\u003c/p\u003e\n\u003cp\u003eA project directory structure where tests mirror src:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-txt\"\u003e/react-app\n|-- /node_modules                      \n|-- /src                     \n|   |-- /components          \n|   |   |-- /Header\n|   |   |   |-- Header.tsx   \n|   |   |-- /Footer\n|   |   |   |-- Footer.tsx   \n|   |-- /utils               \n|   |   |-- validate.ts      \n|   |-- App.tsx              \n|   |-- index.tsx            \n|-- /tests           \n|   |-- /components          \n|   |   |-- /Header\n|   |   |   |-- Header.test.tsx  \n|   |   |-- /Footer\n|   |   |   |-- Footer.test.tsx  \n|   |-- /utils               \n|   |   |-- validate.test.ts \n|   |-- App.test.tsx                \n|-- package.json                         \n|-- README.md                \n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eGroup related tests with nested describes\u003c/h2\u003e\n\u003cp\u003eJest allows you to group tests together with the \u003ca href=\"https://jestjs.io/docs/api#describename-fn\"\u003e\u003ccode class=\"inline-code-custom-style\"\u003edescribe\u003c/code\u003e\u003c/a\u003e keyword. Within the describe scope, tests can share the same setup functions, mocks, and cleanup functions. The use of \u003ccode class=\"inline-code-custom-style\"\u003edescribe\u003c/code\u003e blocks makes tests easier to read, document, skip, and understand.\u003c/p\u003e\n\u003cp\u003eDescribes are especially useful for grouping tests that examine the same component under different states. By giving each state its own describe, we can keep tests that share mock data together, and apart from tests that require different mock data. This avoids issues where test environments aren't cleaning up as expected after tests, I run into this issue a lot when tests rely on mocks that aren't organised in \u003ccode class=\"inline-code-custom-style\"\u003edescribe\u003c/code\u003e blocks.\u003c/p\u003e\n\u003cp\u003eIt's hard to make an example of this using simple code because this type of test structure really only comes into it's own when you're using something like a complex Redux store to handle state.\u003c/p\u003e\n\u003cp\u003eHere's a not-real code example that gets across the main idea:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@testing-library/jest-dom'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eProvider\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'react-redux'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { render, screen, fireEvent } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"@testing-library/react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDashboard\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../../components/Dashboard\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Dashboard'\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Admin permissions'\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e handleDelete = jest.\u003cspan class=\"hljs-title function_\"\u003efn\u003c/span\u003e();\n\n        \u003cspan class=\"hljs-title function_\"\u003ebeforeEach\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n            store = \u003cspan class=\"hljs-title function_\"\u003emockStore\u003c/span\u003e({\n                \u003cspan class=\"hljs-attr\"\u003euserProfile\u003c/span\u003e: {\n                    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'John Doe'\u003c/span\u003e,\n                    \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'john.doe@example.com'\u003c/span\u003e,\n                    \u003cspan class=\"hljs-attr\"\u003epermissions\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"admin\"\u003c/span\u003e\n                }\n            });\n\n            \u003cspan class=\"hljs-title function_\"\u003erender\u003c/span\u003e(\n                \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eProvider\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estore\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{store}\u003c/span\u003e\u003e\u003c/span\u003e\n                    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eDashboard\u003c/span\u003e /\u003e\u003c/span\u003e\n                \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eProvider\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n            );\n        });\n\n        \u003cspan class=\"hljs-title function_\"\u003etest\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'renders correct user email'\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userEmail = screen.\u003cspan class=\"hljs-title function_\"\u003egetByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'user-email'\u003c/span\u003e);\n            \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(userEmail).\u003cspan class=\"hljs-title function_\"\u003etoBeInTheDocument\u003c/span\u003e();\n            \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(userEmail).\u003cspan class=\"hljs-title function_\"\u003etoHaveTextContent\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'john.doe@example.com'\u003c/span\u003e);\n        });\n\n        \u003cspan class=\"hljs-title function_\"\u003etest\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'allows user to delete important thing'\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e handleDelete = jest.\u003cspan class=\"hljs-title function_\"\u003efn\u003c/span\u003e();\n            \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e deleteButton = screen.\u003cspan class=\"hljs-title function_\"\u003egetByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'delete-button'\u003c/span\u003e);\n            \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(deleteButton).\u003cspan class=\"hljs-title function_\"\u003etoBeInTheDocument\u003c/span\u003e();\n            fireEvent.\u003cspan class=\"hljs-title function_\"\u003eclick\u003c/span\u003e(deleteButton);\n            \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(handleDelete).\u003cspan class=\"hljs-title function_\"\u003etoHaveBeenCalled\u003c/span\u003e();\n        });\n    });\n\n    \u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Guest permissions'\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e handleDelete = jest.\u003cspan class=\"hljs-title function_\"\u003efn\u003c/span\u003e();\n\n        \u003cspan class=\"hljs-title function_\"\u003ebeforeEach\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n            store = \u003cspan class=\"hljs-title function_\"\u003emockStore\u003c/span\u003e({\n                \u003cspan class=\"hljs-attr\"\u003euserProfile\u003c/span\u003e: {\n                    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Average Joe'\u003c/span\u003e,\n                    \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'average.joe@example.com'\u003c/span\u003e,\n                    \u003cspan class=\"hljs-attr\"\u003epermissions\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"guest\"\u003c/span\u003e\n                }\n            });\n\n            \u003cspan class=\"hljs-title function_\"\u003erender\u003c/span\u003e(\n                \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eProvider\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estore\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{store}\u003c/span\u003e\u003e\u003c/span\u003e\n                    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eDashboard\u003c/span\u003e /\u003e\u003c/span\u003e\n                \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eProvider\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n            );\n        });\n\n        \u003cspan class=\"hljs-title function_\"\u003etest\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'renders correct user email'\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userEmail = screen.\u003cspan class=\"hljs-title function_\"\u003egetByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'user-email'\u003c/span\u003e);\n            \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(userEmail).\u003cspan class=\"hljs-title function_\"\u003etoBeInTheDocument\u003c/span\u003e();\n            \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(userEmail).\u003cspan class=\"hljs-title function_\"\u003etoHaveTextContent\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'average.joe@example.com'\u003c/span\u003e);\n        });\n\n        \u003cspan class=\"hljs-title function_\"\u003etest\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'does not allow user to delete important thing'\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n            \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e handleDelete = screen.\u003cspan class=\"hljs-title function_\"\u003egetByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'delete-button'\u003c/span\u003e);\n            \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(deleteButton).\u003cspan class=\"hljs-title function_\"\u003etoBeInTheDocument\u003c/span\u003e();\n            fireEvent.\u003cspan class=\"hljs-title function_\"\u003eclick\u003c/span\u003e(deleteButton);\n            \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(handleDelete).\u003cspan class=\"hljs-property\"\u003enot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003etoHaveBeenCalled\u003c/span\u003e();\n        });\n    });\n});\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"https://kentcdodds.com/blog/avoid-nesting-when-youre-testing\"\u003eKen C Dodds suggests avoiding describes when writing tests\u003c/a\u003e, so take my recommendations with a pinch of salt. His use-case is slightly different though, as he suggests grouping tests by behaviour being tested, rather than the source files being tested. I recommend grouping tests by their source file, and then grouping by behaviour using describes within each test file.\u003c/p\u003e\n\u003cp\u003eYou'd think these details wouldn't matter for small codebases, but we naturally have a lot less time and attention to give them, so organising the tests in a straightfoward way is very useful.\u003c/p\u003e","title":"Testing large React applications","short":"Setting up a local LLM on Mac so that it's always ready for your questions","date":"2024-06-16","slug":"testing-large-react-apps","createdAt":"2023-06-16","img":"blog-2.jpg","tags":["Note"]}},"__N_SSG":true},"page":"/[id]","query":{"id":"testing-large-react-apps"},"buildId":"PkGLazdwikLSpzAS6Oea5","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>