<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="My personal website where I keep my notes and thoughts."/><meta name="og:title" content="Paul Treanor"/><meta name="twitter:card" content="summary_large_image"/><link rel="alternate" type="application/rss+xml" title="RSS Feed for paultreanor.com" href="/rss.xml"/><title>AWS Cognito and Amplify auth for React apps (without the Amplify CLI)</title><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/a0a5c827be6f67e6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a0a5c827be6f67e6.css" data-n-g=""/><link rel="preload" href="/_next/static/css/d0f3a9e7dfd4b19b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d0f3a9e7dfd4b19b.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-481ef0d25a716735.js" defer=""></script><script src="/_next/static/chunks/pages/_app-1693ab7fc31cdd21.js" defer=""></script><script src="/_next/static/chunks/562-d0bcd15ec5190dc9.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bid%5D-331c202ad6dd6bd9.js" defer=""></script><script src="/_next/static/2wzmhNqsE_zD2h_nwU6du/_buildManifest.js" defer=""></script><script src="/_next/static/2wzmhNqsE_zD2h_nwU6du/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script><script nomodule="" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script><div class="mx-2 md:mx-20 lg:mx-40 font-open-sans mb-32"><header class="max-w-2xl mx-auto"><div class="mt-10 mb-8"><a href="/"><div class="text-4xl">üè†</div></a></div></header><main><div class="max-w-2xl mx-auto"><h5 class="text-slate-600 font-normal mb-5"><time dateTime="2025-01-26">January 26, 2025</time></h5><div class="blog-content"><h1>AWS Cognito and Amplify auth for React apps (without the Amplify CLI)</h1>
<p>The Amplify frontend library is great for auth, but the Amplify docs don't make it very obvious how to use it without the slightly clunky Amplify CLI. Here are my notes on provisioning a Cognito userpool with AWS SAM and using it with the aws-amplify npm library to add auth in a webapp.</p>
<h2>Provisioning a Cognito userpool and userpool client in AWS SAM</h2>
<p>The Cognito userpool and userpool client are the actual backend infrastructure that manages user accounts. You can think of a userpool as a database for accounts. Here's an <a href="https://aws.amazon.com/serverless/sam/">AWS SAM</a> template.yaml that can provision these resources:</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">AWSTemplateFormatVersion:</span> <span class="hljs-string">'2010-09-09'</span>
<span class="hljs-attr">Transform:</span> <span class="hljs-string">AWS::Serverless-2016-10-31</span>
<span class="hljs-attr">Description:</span> <span class="hljs-string">>
  Cognito resources for webapp authorisation
</span><span class="hljs-attr">Resources:</span>
  <span class="hljs-attr">UserPool:</span>
    <span class="hljs-attr">Type:</span> <span class="hljs-string">AWS::Cognito::UserPool</span>
    <span class="hljs-attr">Properties:</span>
      <span class="hljs-attr">UserPoolName:</span> <span class="hljs-string">WeightmateUserPool</span>
      <span class="hljs-attr">AdminCreateUserConfig:</span>
        <span class="hljs-attr">AllowAdminCreateUserOnly:</span> <span class="hljs-literal">false</span>
      <span class="hljs-attr">AutoVerifiedAttributes:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">email</span>
      <span class="hljs-attr">Policies:</span>
        <span class="hljs-attr">PasswordPolicy:</span>
          <span class="hljs-attr">MinimumLength:</span> <span class="hljs-number">8</span>
          <span class="hljs-attr">RequireLowercase:</span> <span class="hljs-literal">true</span>
          <span class="hljs-attr">RequireNumbers:</span> <span class="hljs-literal">true</span>
          <span class="hljs-attr">RequireSymbols:</span> <span class="hljs-literal">true</span>
          <span class="hljs-attr">RequireUppercase:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">UserPoolClient:</span>
    <span class="hljs-attr">Type:</span> <span class="hljs-string">AWS::Cognito::UserPoolClient</span>
    <span class="hljs-attr">Properties:</span>
      <span class="hljs-attr">UserPoolId:</span> <span class="hljs-type">!Ref</span> <span class="hljs-string">UserPool</span>
      <span class="hljs-attr">ClientName:</span> <span class="hljs-string">WeightmateWeb</span>
      <span class="hljs-attr">ExplicitAuthFlows:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">ALLOW_USER_SRP_AUTH</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">ALLOW_REFRESH_TOKEN_AUTH</span>
      <span class="hljs-attr">PreventUserExistenceErrors:</span> <span class="hljs-string">ENABLED</span>

<span class="hljs-attr">Outputs:</span>
  <span class="hljs-attr">UserPoolId:</span>
    <span class="hljs-attr">Description:</span> <span class="hljs-string">ID</span> <span class="hljs-string">of</span> <span class="hljs-string">the</span> <span class="hljs-string">User</span> <span class="hljs-string">Pool</span>
    <span class="hljs-attr">Value:</span> <span class="hljs-type">!Ref</span> <span class="hljs-string">UserPool</span>
  <span class="hljs-attr">UserPoolClientId:</span>
    <span class="hljs-attr">Description:</span> <span class="hljs-string">ID</span> <span class="hljs-string">of</span> <span class="hljs-string">the</span> <span class="hljs-string">User</span> <span class="hljs-string">Pool</span> <span class="hljs-string">Client</span>
    <span class="hljs-attr">Value:</span> <span class="hljs-type">!Ref</span> <span class="hljs-string">UserPoolClient</span>
</code></pre>
<p>The outputted UserPoolId and UserPoolClientId values are what we use to integrate Cognito with Amplify.</p>
<h2>Configuring Amplify on your frontend</h2>
<p>Amplify is actually simple to set up, there's just two stumbling blocks:</p>
<ol>
<li>Amplify v6 is quite different to previous Amplify versions, so double check that you're on the right docs page and don't trust LLMs.</li>
<li>Every example in the docs uses the Amplify CLI which obscures what is actually being added to your app.</li>
</ol>
<p>The <a href="https://docs.amplify.aws/gen1/react/tools/libraries/configure-categories/">authentication configuration</a> near the top of this docs page is a useful resource.</p>
<h3>Step 1: Add the aws-amplify module to your app's package.json</h3>
<pre><code class="hljs language-bash">npm install aws-amplify
</code></pre>
<h3>Step 2: Add your Cognito details to a .env file</h3>
<p>Different frontend frameworks will handle handle environment variables in different ways so you'll have to consult the docs for whatever you are using. If you are still using Gatsby for some reason like I often do, then your <code class="inline-code-custom-style">.env.development</code> / <code class="inline-code-custom-style">.env.production</code> file would look like this (I just made these specific values up):</p>
<pre><code class="hljs language-bash">GATSBY_COGNITO_USER_POOL_ID=us-east-1_Ra7CjsEwl
GATSBY_COGNITO_CLIENT_ID=akav9na83n2vna9n2010nvn2m2
</code></pre>
<h3>Step 3: Call Amplify.config in your frontend code</h3>
<p>You need to call <code class="inline-code-custom-style">Amplify.configure</code> with a configuration that includes you userPoolId, userPoolClientId, and region (from your env file). This method just needs to be called within a component early in your app's render cycle - probably something like <code class="inline-code-custom-style">index.ts</code> depending on your framework.</p>
<p>Amplify uses browser storage to hold it's auth state so technically once you have this in your code Amplify is installed on your app.</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Amplify</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'aws-amplify'</span>;

<span class="hljs-title class_">Amplify</span>.<span class="hljs-title function_">configure</span>({
	<span class="hljs-title class_">Auth</span>: {
		<span class="hljs-title class_">Cognito</span>: {
			<span class="hljs-attr">userPoolId</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">USER_POOL_ID</span>,
			<span class="hljs-attr">userPoolClientId</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">CLIENT_ID</span>,
			<span class="hljs-attr">region</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">AWS_REGION</span>,
			<span class="hljs-attr">loginWith</span>: {
				<span class="hljs-attr">username</span>: <span class="hljs-literal">false</span>,
				<span class="hljs-attr">email</span>: <span class="hljs-literal">true</span>,
			}
		}
	}
});
</code></pre>
<h3>Step 4: Use the Amplify library methods to manage auth</h3>
<p>Among other things, Amplify provides methods for logging in, logging out, signing new users up, and checking if a user is logged. Here's a very basic React app that shows the main methods being used in one big component.</p>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { signIn, signUp, signOut, getCurrentUser } <span class="hljs-keyword">from</span> <span class="hljs-string">'aws-amplify/auth'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MinimalAuthAppExample</span>(<span class="hljs-params"></span>) {
	<span class="hljs-keyword">const</span> [isAuthenticated, setIsAuthenticated] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
	<span class="hljs-keyword">const</span> [isLogin, setIsLogin] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
	<span class="hljs-keyword">const</span> [email, setEmail] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
	<span class="hljs-keyword">const</span> [password, setPassword] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
	<span class="hljs-keyword">const</span> [confirmPassword, setConfirmPassword] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);

	<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
		<span class="hljs-title function_">checkAuthStatus</span>();
	}, []);

	<span class="hljs-keyword">const</span> <span class="hljs-title function_">checkAuthStatus</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) => {
		<span class="hljs-keyword">try</span> {
			<span class="hljs-keyword">await</span> <span class="hljs-title function_">getCurrentUser</span>();
			<span class="hljs-title function_">setIsAuthenticated</span>(<span class="hljs-literal">true</span>);
		} <span class="hljs-keyword">catch</span> (error) {
			<span class="hljs-title function_">setIsAuthenticated</span>(<span class="hljs-literal">false</span>);
		}
	};

	<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">e: React.FormEvent</span>) => {
		e.<span class="hljs-title function_">preventDefault</span>();
		
		<span class="hljs-keyword">try</span> {
			<span class="hljs-keyword">if</span> (isLogin) {
				<span class="hljs-keyword">await</span> <span class="hljs-title function_">signIn</span>({ <span class="hljs-attr">username</span>: email, password });
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">if</span> (password !== confirmPassword) {
					<span class="hljs-title function_">alert</span>(<span class="hljs-string">'Passwords do not match'</span>);
					<span class="hljs-keyword">return</span>;
				}
				
				<span class="hljs-keyword">await</span> <span class="hljs-title function_">signUp</span>({
					<span class="hljs-attr">username</span>: email,
					password,
					<span class="hljs-attr">options</span>: {
						<span class="hljs-attr">userAttributes</span>: { email }
					}
				});
			}
			<span class="hljs-title function_">setIsAuthenticated</span>(<span class="hljs-literal">true</span>);
		} <span class="hljs-keyword">catch</span> (err) {
			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Auth error:'</span>, err);
			<span class="hljs-title function_">alert</span>(<span class="hljs-string">"Authentication failed"</span>);
		}
	}

	<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogout</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) => {
		<span class="hljs-keyword">try</span> {
			<span class="hljs-keyword">await</span> <span class="hljs-title function_">signOut</span>();
			<span class="hljs-title function_">setIsAuthenticated</span>(<span class="hljs-literal">false</span>);
		} <span class="hljs-keyword">catch</span> (error) {
			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error signing out:'</span>, error);
		}
	}

	<span class="hljs-keyword">if</span> (isAuthenticated) {
		<span class="hljs-keyword">return</span> (
			<span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
				<span class="hljs-tag">&#x3C;<span class="hljs-name">p</span>></span>You are logged in!<span class="hljs-tag">&#x3C;/<span class="hljs-name">p</span>></span>
				<span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleLogout}</span>></span>Logout<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
			<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
		);
	}

	<span class="hljs-keyword">return</span> (
		<span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
			<span class="hljs-tag">&#x3C;<span class="hljs-name">h2</span>></span>{isLogin ? 'Login' : 'Sign Up'}<span class="hljs-tag">&#x3C;/<span class="hljs-name">h2</span>></span>
			<span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =></span> setIsLogin(!isLogin)}>
				Switch to {isLogin ? 'Sign Up' : 'Login'}
			<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>

			<span class="hljs-tag">&#x3C;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>></span>
				<span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
					<span class="hljs-tag">&#x3C;<span class="hljs-name">label</span>></span>Email:<span class="hljs-tag">&#x3C;/<span class="hljs-name">label</span>></span>
					<span class="hljs-tag">&#x3C;<span class="hljs-name">input</span>
						<span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
						<span class="hljs-attr">value</span>=<span class="hljs-string">{email}</span>
						<span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =></span> setEmail(e.target.value)}
						required
					/>
				<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>

				<span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
					<span class="hljs-tag">&#x3C;<span class="hljs-name">label</span>></span>Password:<span class="hljs-tag">&#x3C;/<span class="hljs-name">label</span>></span>
					<span class="hljs-tag">&#x3C;<span class="hljs-name">input</span>
						<span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
						<span class="hljs-attr">value</span>=<span class="hljs-string">{password}</span>
						<span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =></span> setPassword(e.target.value)}
						required
					/>
				<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>

				{!isLogin &#x26;&#x26; (
					<span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
						<span class="hljs-tag">&#x3C;<span class="hljs-name">label</span>></span>Confirm Password:<span class="hljs-tag">&#x3C;/<span class="hljs-name">label</span>></span>
						<span class="hljs-tag">&#x3C;<span class="hljs-name">input</span>
							<span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
							<span class="hljs-attr">value</span>=<span class="hljs-string">{confirmPassword}</span>
							<span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =></span> setConfirmPassword(e.target.value)}
							required
						/>
					<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
				)}

				<span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>></span>
					{isLogin ? 'Login' : 'Sign Up'}
				<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
			<span class="hljs-tag">&#x3C;/<span class="hljs-name">form</span>></span>
		<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
	);
}
</code></pre>
<p>And that's it!</p>
<p>I have no massive gripes with the Amplify CLI but tools like SAM or CDK are more mature and better suited to deploying more complex applications. In my case I like using SAM and I didn't want to have half my infrastructure provisioned with the Amplify CLI and the other half in SAM.</p></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"aws-webapp-auth","contentHtml":"\u003ch1\u003eAWS Cognito and Amplify auth for React apps (without the Amplify CLI)\u003c/h1\u003e\n\u003cp\u003eThe Amplify frontend library is great for auth, but the Amplify docs don't make it very obvious how to use it without the slightly clunky Amplify CLI. Here are my notes on provisioning a Cognito userpool with AWS SAM and using it with the aws-amplify npm library to add auth in a webapp.\u003c/p\u003e\n\u003ch2\u003eProvisioning a Cognito userpool and userpool client in AWS SAM\u003c/h2\u003e\n\u003cp\u003eThe Cognito userpool and userpool client are the actual backend infrastructure that manages user accounts. You can think of a userpool as a database for accounts. Here's an \u003ca href=\"https://aws.amazon.com/serverless/sam/\"\u003eAWS SAM\u003c/a\u003e template.yaml that can provision these resources:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003eAWSTemplateFormatVersion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'2010-09-09'\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eTransform:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eAWS::Serverless-2016-10-31\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eDescription:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u003e\n  Cognito resources for webapp authorisation\n\u003c/span\u003e\u003cspan class=\"hljs-attr\"\u003eResources:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eUserPool:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eType:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eAWS::Cognito::UserPool\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eProperties:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eUserPoolName:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eWeightmateUserPool\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eAdminCreateUserConfig:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eAllowAdminCreateUserOnly:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eAutoVerifiedAttributes:\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eemail\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ePolicies:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ePasswordPolicy:\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eMinimumLength:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eRequireLowercase:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eRequireNumbers:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eRequireSymbols:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eRequireUppercase:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eUserPoolClient:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eType:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eAWS::Cognito::UserPoolClient\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eProperties:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eUserPoolId:\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003e!Ref\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eUserPool\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eClientName:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eWeightmateWeb\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eExplicitAuthFlows:\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eALLOW_USER_SRP_AUTH\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eALLOW_REFRESH_TOKEN_AUTH\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ePreventUserExistenceErrors:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eENABLED\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003eOutputs:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eUserPoolId:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eDescription:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eID\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eof\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ethe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eUser\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePool\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eValue:\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003e!Ref\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eUserPool\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eUserPoolClientId:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eDescription:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eID\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eof\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ethe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eUser\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePool\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eClient\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eValue:\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003e!Ref\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eUserPoolClient\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe outputted UserPoolId and UserPoolClientId values are what we use to integrate Cognito with Amplify.\u003c/p\u003e\n\u003ch2\u003eConfiguring Amplify on your frontend\u003c/h2\u003e\n\u003cp\u003eAmplify is actually simple to set up, there's just two stumbling blocks:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eAmplify v6 is quite different to previous Amplify versions, so double check that you're on the right docs page and don't trust LLMs.\u003c/li\u003e\n\u003cli\u003eEvery example in the docs uses the Amplify CLI which obscures what is actually being added to your app.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThe \u003ca href=\"https://docs.amplify.aws/gen1/react/tools/libraries/configure-categories/\"\u003eauthentication configuration\u003c/a\u003e near the top of this docs page is a useful resource.\u003c/p\u003e\n\u003ch3\u003eStep 1: Add the aws-amplify module to your app's package.json\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003enpm install aws-amplify\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eStep 2: Add your Cognito details to a .env file\u003c/h3\u003e\n\u003cp\u003eDifferent frontend frameworks will handle handle environment variables in different ways so you'll have to consult the docs for whatever you are using. If you are still using Gatsby for some reason like I often do, then your \u003ccode class=\"inline-code-custom-style\"\u003e.env.development\u003c/code\u003e / \u003ccode class=\"inline-code-custom-style\"\u003e.env.production\u003c/code\u003e file would look like this (I just made these specific values up):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eGATSBY_COGNITO_USER_POOL_ID=us-east-1_Ra7CjsEwl\nGATSBY_COGNITO_CLIENT_ID=akav9na83n2vna9n2010nvn2m2\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eStep 3: Call Amplify.config in your frontend code\u003c/h3\u003e\n\u003cp\u003eYou need to call \u003ccode class=\"inline-code-custom-style\"\u003eAmplify.configure\u003c/code\u003e with a configuration that includes you userPoolId, userPoolClientId, and region (from your env file). This method just needs to be called within a component early in your app's render cycle - probably something like \u003ccode class=\"inline-code-custom-style\"\u003eindex.ts\u003c/code\u003e depending on your framework.\u003c/p\u003e\n\u003cp\u003eAmplify uses browser storage to hold it's auth state so technically once you have this in your code Amplify is installed on your app.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAmplify\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'aws-amplify'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-title class_\"\u003eAmplify\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003econfigure\u003c/span\u003e({\n\t\u003cspan class=\"hljs-title class_\"\u003eAuth\u003c/span\u003e: {\n\t\t\u003cspan class=\"hljs-title class_\"\u003eCognito\u003c/span\u003e: {\n\t\t\t\u003cspan class=\"hljs-attr\"\u003euserPoolId\u003c/span\u003e: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eUSER_POOL_ID\u003c/span\u003e,\n\t\t\t\u003cspan class=\"hljs-attr\"\u003euserPoolClientId\u003c/span\u003e: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eCLIENT_ID\u003c/span\u003e,\n\t\t\t\u003cspan class=\"hljs-attr\"\u003eregion\u003c/span\u003e: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eAWS_REGION\u003c/span\u003e,\n\t\t\t\u003cspan class=\"hljs-attr\"\u003eloginWith\u003c/span\u003e: {\n\t\t\t\t\u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n\t\t\t\t\u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n\t\t\t}\n\t\t}\n\t}\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eStep 4: Use the Amplify library methods to manage auth\u003c/h3\u003e\n\u003cp\u003eAmong other things, Amplify provides methods for logging in, logging out, signing new users up, and checking if a user is logged. Here's a very basic React app that shows the main methods being used in one big component.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-tsx\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e, { useState, useEffect } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { signIn, signUp, signOut, getCurrentUser } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'aws-amplify/auth'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eMinimalAuthAppExample\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n\t\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [isAuthenticated, setIsAuthenticated] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e);\n\t\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [isLogin, setIsLogin] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e);\n\t\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [email, setEmail] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e);\n\t\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [password, setPassword] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e);\n\t\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [confirmPassword, setConfirmPassword] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e);\n\n\t\u003cspan class=\"hljs-title function_\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n\t\t\u003cspan class=\"hljs-title function_\"\u003echeckAuthStatus\u003c/span\u003e();\n\t}, []);\n\n\t\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003echeckAuthStatus\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n\t\t\u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n\t\t\t\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetCurrentUser\u003c/span\u003e();\n\t\t\t\u003cspan class=\"hljs-title function_\"\u003esetIsAuthenticated\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e);\n\t\t} \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n\t\t\t\u003cspan class=\"hljs-title function_\"\u003esetIsAuthenticated\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e);\n\t\t}\n\t};\n\n\t\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ehandleSubmit\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003ee: React.FormEvent\u003c/span\u003e) =\u003e {\n\t\te.\u003cspan class=\"hljs-title function_\"\u003epreventDefault\u003c/span\u003e();\n\t\t\n\t\t\u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n\t\t\t\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (isLogin) {\n\t\t\t\t\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esignIn\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: email, password });\n\t\t\t} \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n\t\t\t\t\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (password !== confirmPassword) {\n\t\t\t\t\t\u003cspan class=\"hljs-title function_\"\u003ealert\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Passwords do not match'\u003c/span\u003e);\n\t\t\t\t\t\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esignUp\u003c/span\u003e({\n\t\t\t\t\t\u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: email,\n\t\t\t\t\tpassword,\n\t\t\t\t\t\u003cspan class=\"hljs-attr\"\u003eoptions\u003c/span\u003e: {\n\t\t\t\t\t\t\u003cspan class=\"hljs-attr\"\u003euserAttributes\u003c/span\u003e: { email }\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\u003cspan class=\"hljs-title function_\"\u003esetIsAuthenticated\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e);\n\t\t} \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (err) {\n\t\t\t\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Auth error:'\u003c/span\u003e, err);\n\t\t\t\u003cspan class=\"hljs-title function_\"\u003ealert\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Authentication failed\"\u003c/span\u003e);\n\t\t}\n\t}\n\n\t\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ehandleLogout\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n\t\t\u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n\t\t\t\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esignOut\u003c/span\u003e();\n\t\t\t\u003cspan class=\"hljs-title function_\"\u003esetIsAuthenticated\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e);\n\t\t} \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n\t\t\t\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Error signing out:'\u003c/span\u003e, error);\n\t\t}\n\t}\n\n\t\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (isAuthenticated) {\n\t\t\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n\t\t\t\u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u003e\u003c/span\u003eYou are logged in!\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{handleLogout}\u003c/span\u003e\u003e\u003c/span\u003eLogout\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\t\t);\n\t}\n\n\t\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n\t\t\u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eh2\u003c/span\u003e\u003e\u003c/span\u003e{isLogin ? 'Login' : 'Sign Up'}\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eh2\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{()\u003c/span\u003e =\u003e\u003c/span\u003e setIsLogin(!isLogin)}\u003e\n\t\t\t\tSwitch to {isLogin ? 'Sign Up' : 'Login'}\n\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u003e\u003c/span\u003e\n\n\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonSubmit\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{handleSubmit}\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003eEmail:\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e\n\t\t\t\t\t\t\u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e\n\t\t\t\t\t\t\u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{email}\u003c/span\u003e\n\t\t\t\t\t\t\u003cspan class=\"hljs-attr\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{(e)\u003c/span\u003e =\u003e\u003c/span\u003e setEmail(e.target.value)}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/\u003e\n\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n\n\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003ePassword:\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e\n\t\t\t\t\t\t\u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e\n\t\t\t\t\t\t\u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{password}\u003c/span\u003e\n\t\t\t\t\t\t\u003cspan class=\"hljs-attr\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{(e)\u003c/span\u003e =\u003e\u003c/span\u003e setPassword(e.target.value)}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/\u003e\n\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n\n\t\t\t\t{!isLogin \u0026#x26;\u0026#x26; (\n\t\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003eConfirm Password:\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e\n\t\t\t\t\t\t\t\u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e\n\t\t\t\t\t\t\t\u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{confirmPassword}\u003c/span\u003e\n\t\t\t\t\t\t\t\u003cspan class=\"hljs-attr\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{(e)\u003c/span\u003e =\u003e\u003c/span\u003e setConfirmPassword(e.target.value)}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/\u003e\n\t\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\t)}\n\n\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"submit\"\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\t\t{isLogin ? 'Login' : 'Sign Up'}\n\t\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e\u003e\u003c/span\u003e\n\t\t\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\t);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd that's it!\u003c/p\u003e\n\u003cp\u003eI have no massive gripes with the Amplify CLI but tools like SAM or CDK are more mature and better suited to deploying more complex applications. In my case I like using SAM and I didn't want to have half my infrastructure provisioned with the Amplify CLI and the other half in SAM.\u003c/p\u003e","title":"AWS Cognito and Amplify auth for React apps (without the Amplify CLI)","short":"Guide to simple AWS Auth for webapps with Cognito and Amplify","date":"2025-01-26","slug":"aws-webapp-auth","createdAt":"2025-01-26","img":"blog-2.jpg","tags":["Tutorial"]}},"__N_SSG":true},"page":"/[id]","query":{"id":"aws-webapp-auth"},"buildId":"2wzmhNqsE_zD2h_nwU6du","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>